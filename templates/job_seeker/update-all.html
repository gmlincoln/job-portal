{% extends 'common/base.html' %}

{% block title %}
<title>Edit Profile Sections</title>
{% endblock title %}

{% block body %}
<div class="container mt-5">
    <h2 class="text-center mb-4">Edit Your Important Information</h2>
    <div class="card shadow-lg p-4">

        <!-- Education Section -->
        <div class="mb-4">
            <h4 class="d-flex justify-content-between align-items-center">
                Education
                <a href="{% url 'addEducation' %}" class="btn btn-outline-primary btn-sm">Add</a>
            </h4>

            {% if education_info %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Degree Name</th>
                        <th>Institute Name</th>
                        <th>Start Year</th>
                        <th>End Year</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for e in education_info %}
                    <tr>
                        {% if e.degree_name == 'ssc' or e.degree_name == 'hsc' %}
                        <td>{{ e.degree_name| upper }}</td>

                        {% elif e.degree_name == 'bachelor' or e.degree_name == 'master' %}
                        <td>{{e.degree_name | capfirst}}'s Degree</td>
                        {% else %}
                        <td>{{e.degree_name | capfirst}}</td>
                        {% endif %}

                        <td>{{ e.institute_name }}</td>
                        <td>{{ e.start_date|date:"Y" }}</td>
                        <td>{{ e.end_date|date:"Y" }}</td>
                        <td>
                            <a href="{% url 'updateEducation' e.id %}" class="btn btn-primary btn-sm">
                                <i class="fa-regular fa-pen-to-square"></i>
                            </a>
                            <a href="{% url 'deleteEducation' e.id %}" class="btn btn-danger btn-sm">
                                <i class="fa-solid fa-trash-can"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="alert alert-dark">
                No educational information available.
            </div>
            {% endif %}
        </div>

        <!-- Experience Section -->
        <div class="mb-4">
            <h4 class="d-flex justify-content-between align-items-center">
                Experience
                <a href="{% url 'addExperience' %}" class="btn btn-outline-primary btn-sm">Add</a>
            </h4>

            {% if experience_info %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Job Title</th>
                        <th>Company Name</th>
                        <th>Start Date</th>
                        <th>End Date</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for exp in experience_info %}
                    <tr>
                        <td>{{ exp.job_title }}</td>
                        <td>{{ exp.company_name }}</td>
                        <td>{{ exp.start_date|date:"Y-m-d" }}</td>
                        <td>{{ exp.end_date|date:"Y-m-d" }}</td>
                        <td>
                            <a href="{% url 'updateExperience' exp.id %}" class="btn btn-primary btn-sm">
                                <i class="fa-regular fa-pen-to-square"></i>
                            </a>
                            <a href="{% url 'deleteExperience' exp.id %}" class="btn btn-danger btn-sm">
                                <i class="fa-solid fa-trash-can"></i>
                            </a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="alert alert-dark">
                No experience information available.
            </div>
            {% endif %}
        </div>

        <!-- Language Section -->
        <div class="mb-4">
            <h4 class="d-flex justify-content-between align-items-center">
                Languages
                <a href="{% url 'addLanguage' %}" class="btn btn-outline-primary btn-sm">Add</a>
            </h4>

            {% if language_info %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Language</th>
                        <th>Proficiency</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for lang in language_info %}
                    <tr>
                        <td>{{ lang.language_name }}</td>
                        <td>{{ lang.proficiency }}</td>
                        <td>
                            <a href="{% url 'updateLanguage' lang.id %}" class="btn btn-outline-primary btn-sm">Edit</a>
                            <a href="{% url 'deleteLanguage' lang.id %}"
                                class="btn btn-outline-danger btn-sm">Delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="alert alert-dark">
                No languages added yet.
            </div>
            {% endif %}
        </div>

        <!-- Skills Section -->
        <div class="mb-4">
            <h4 class="d-flex justify-content-between align-items-center">
                Skills
                <a href="{% url 'addSkill' %}" class="btn btn-outline-primary btn-sm">Add</a>
            </h4>

            {% if skills_info %}
            <table class="table table-striped">
                <thead>
                    <tr>
                        <th>Skill</th>
                        <th>Proficiency</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    {% for skill in skills_info %}
                    <tr>
                        <td>{{ skill.skill_name }}</td>
                        <td>{{ skill.proficiency }}</td>
                        <td>
                            <a href="{% url 'updateSkill' skill.id %}" class="btn btn-outline-primary btn-sm">Edit</a>
                            <a href="{% url 'deleteSkill' skill.id %}" class="btn btn-outline-danger btn-sm">Delete</a>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
            {% else %}
            <div class="alert alert-dark">
                No skills added yet.
            </div>
            {% endif %}
        </div>

    </div>
</div>
{% endblock body %}